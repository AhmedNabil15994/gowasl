<?php

namespace Modules\Offer\Repositories\Vendor;

use Illuminate\Support\Facades\DB;
use Modules\Core\Repositories\Dashboard\CrudRepository;
use Modules\Offer\Entities\Offer;

class OfferRepository extends CrudRepository
{

    public function __construct()
    {
        parent::__construct(Offer::class);
        $this->statusAttribute = ['status','is_published'];
        $this->fileAttribute       = ['main_image' => 'main_image','images'=>'images','video'=>'videos'];
    }

    public function QueryTable($request)
    {
        $query = parent::QueryTable($request);
        if(auth()->user()->can('seller_access')){
            return $query->where('seller_id',auth()->id());
        }
        return $query; // TODO: Change the autogenerated stub
    }

}
